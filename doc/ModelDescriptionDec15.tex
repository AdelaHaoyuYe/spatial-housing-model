
\documentclass{article}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheorem{theorem}{Theorem}
\newtheorem{acknowledgement}[theorem]{Acknowledgement}
\newtheorem{algorithm}[theorem]{Algorithm}
\newtheorem{axiom}[theorem]{Axiom}
\newtheorem{case}[theorem]{Case}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{conclusion}[theorem]{Conclusion}
\newtheorem{condition}[theorem]{Condition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{criterion}[theorem]{Criterion}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{problem}[theorem]{Problem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{solution}[theorem]{Solution}
\newtheorem{summary}[theorem]{Summary}
\newenvironment{proof}[1][Proof]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}
\setlength{\parskip}{1.8mm}
\setlength{\parindent}{0mm}
\begin{document}

\title{Housing ABM, December 2015}
\maketitle

\section{Introduction}
The model consists of houses that are bought and sold by households on a housing market; households take out mortgages from a bank, which is regulated by a central bank. Owner-occupiers can also choose to buy and sell properties as buy-to-let investments. These are offered on a rental market and rented out by households that decide to rent rather than buy. Households that cannot afford to rent or buy are put into social housing.

Houses have no intrinsic properties other than a single `quality', which acts as a proxy for size, location, condition etc. The model is time-stepping with a step of one month.

\section{Household lifecycle}

Households enter the model, age, and exit. Upon entry, households are endowed with an age (taken from an empirical distributions), a value representing their income percentile (chosen with uniform probability) and wealth (based on average wealth for their income) but no existing housing. 8\% of households that are above the 50th percentile of income are given a buy-to-let `gene' which gives them the desire to enter the buy-to-let market.

The age of a household represents the age of the `household reference person' (HRP) (a concept that exists in many household surveys). As a household ages, its income percentile remains fixed and its income changes based on the empirical distribution of income by age in the UK. Income is bounded by a lower limit of \pounds 5,900 (the current level of income support for a married couple).
Each month, each household has a certain probability of `death' based on its age, taken from empirical rates for the UK. On exit, all of a household's financial and housing wealth is given to another, randomly chosen, household. 
\section{Simulation initialisation}
In order to initialise a simulation with a realistic assignment of houses and mortgages to households, the model goes through a `spinup' period before any simulation. For a given target population, the necessary total birth rate is calculated and the population is allowed to grow to its equilibrium distribution while holding the total birth rate fixed.

During this period, houses are put on the sale market by a `construction sector' when the household to house ratio falls below a fixed value. New houses will be put onto the house sale market at the current market price and will drop the price at a rate of $5\%$ per month if unsold.

\section{Households}

\subsection{A month in the life...}
In each one-month time-step, each household:
\begin{enumerate}
\item ages by 1 month and possibly dies
\item receives its gross employment income and pays income tax and national insurance according to UK tax law for a single person in the 2014/15 tax year (this needs changing to account for probability of household status given income and age).
\item makes mortgage and/or rental payments and collects any rent due
\item consumes
\item decides whether to try to rent/buy a new house
\item decides whether to sell any owned houses
\item rethinks the price of any house on the rental/sale market or takes the house off the market.
\end{enumerate}

\subsection{Household consumption}

Households have a fixed, subsistence-consumption set at the married couple's monthly lower earnings limit for UK income support. After this is subtracted from disposable income, the household's discretionary consumption is calculated as

\begin{equation}
E=\alpha \max \left( b-e^{4.07\log (i)-33.1+\varepsilon },0\right)
\end{equation}

where $b$ is the household's liquid wealth, $i$ is gross annual income, $\alpha$ is a constant and $\varepsilon$ is a noise term. This formula ensures that the aggregate wealth distribution fits the empirical distribution of wealth given income for the UK, while ensuring that households with higher income consume more. The rule imposes the distribution quite agressively, effectively making liquid wealth roughly a function of income. This needs to be improved.

\subsection{Decisions while in ``social housing''}
All agents are born into ``social housing''. Although we refer to this as social housing, this also represents homelessness, living with parents while looking for a house or living in temporary accommodation (e.g.hotel, staying with friends) while between houses.

Agents never choose to be in ``social housing'', but are put there if they fail to secure any other form of housing at a given time. If they find themselves in social housing they will always consider renting or buying and will bid on the appropriate market. When in social housing, no rental payments are deducted from income.

\subsubsection{Decision to rent or buy a home}
\label{rentorbuy}
If an agent is in need of a new home (if in social housing, at the end of a rental contract or directly after the sale of a house), they need to decide between renting and buying. The probability of deciding to buy is given by
\[
P_{buy} = \frac{1}{1 + e^{K_{rb}(C_{r}(1+C_R) - C_{b})}}
\]
where $K_{rb}$ is a constant giving sinsitivity to cost, $C_{r}$ is the average annual rent on a house of the buyer's desired quality, $C_R$ is a constant, representing the intrinsic desire to own rather than rent (i.e. the psychological cost of renting), and $C_{b}$ is the expected annual mortgage payment minus the expected annual capital appreciation of a house of the buyer's desired quality.

Desired quality is the maximum quality house that, at current market prices, the household would expect to get if they entered the house sale market (see section \ref{buyahome}).

\subsection{Decisions as a renter}
If a household decides to rent, they will bid 0.3 times their income for rent. Upon entering a rental contract, they will live in the rented house and pay rent until the end of the contract. At the end of the contract, they will reconsider whether to rent or buy as described in section \ref{rentorbuy}.

\subsection{Decisions as a Homeowner}

\subsubsection{Buying a home}
\label{buyahome}
If a household decides to buy a home, it will bid on the house sale market. The desired amount of the bid is given by
\[
 \frac{\sigma i e^{N(0,\epsilon)}}{1.0 - AP}
\]
where $i$ is income, $P$ is expected house price appreciation, $N()$ is Gaussian noise, $\sigma$, $A$ and $\epsilon$ are parameters. This formula is exactly equivalent to the one used in the Washington model, although the parameter values used are different.

The actual amount bid is the closest amount possible to the desired bid, after accounting for any bank-decided constraints on mortgages available to the agent.

\subsubsection{Downpayment on a new home}
\label{downpayment}
On buying a house, the minimum downpayment on the house is imposed by the mortgage lender during the mortgage pre-approval process (where applicable) but the household may choose to make a larger downpayment. If the household has liquid wealth of 1.25 times the price of the house, they will pay outright (this ensures there are roughly the right number of cash buyers). Otherwise they will choose the $i^{th}$ percentile from a log-normal distribution calibrated against emprical LTV distributions, where $i$ is their income percentile. The parameters of the log-normal distributions are different for first time buyers (FTB) and owner-occupiers (OO).

\subsubsection{Decision to sell a home}
The probability that an agent will sell their home is a linear function of the number of houses currently on the market and the mortgage interest rate. This is a fudge to prevent unrealistic build up of housing stock on the market and unrealistic fluctuations in interest rates.

\subsubsection{Sale price decision}
\label{saleprice}
Houses are offered on the market at a price, $q,$ given by

\begin{equation}
\ln q=0.095+\ln (\bar{p})-D\ln \left( \frac{\bar{d}+1}{\left\langle
d\right\rangle +1}\right) +\varepsilon
\end{equation}

\bigskip

where $\bar{p}$ is the average sold-price of houses of this quality, $\bar{d}
$ is the average days on the market for all house qualities, $\left\langle
d\right\rangle $ is the prior expectation of the number of days on the
market, $D$ is a tunable parameter (currently set to 0), and $\varepsilon
=N(0,0.01^{2})$. Please see Washington model documentation for motivation for this equation.

If a house remains on the market from the previous time-step, with a 6\%
probability its price is reduced by an amount drawn from a Gaussian
distribution with mean around -1.6\% and SD 0.6\%. This is calibrated
against data on house price reductions from Zoopla. If the price drops below the amount needed to pay the mortgage on the house, it is withdrawn from the market.


\subsection{Buy-To-Let Investor's decisions}
\subsubsection{BtL heterogeneity}
BtL investors are, with a tunable probability, randomly assigned to be either `fundamentalist' or `trend follower'. The only difference between the two is the value of the `capital gain coefficient' $c_{g}$, which is used in some of the decision processes below.

\subsubsection{Buy-to-let rental offers}
A BTL investor will put a house on the rental market
whenever a rental contract ends, or when a new buy-to-let house is bought
that doesn't already have a tenant. 

The rent BTL investors charge is given by:

\begin{equation}
\ln(r)=C+\ln (\bar{p})-D\ast \ln((d+1.0)/31.0)+E\ast N(0,1)
\end{equation}

\bigskip

where $C=0.01$, $D=0.02$, $E=0.05$. $N(0,1)$ is a Gaussian noise term with
average 0 and variance 1. $\bar{p}$ is the average mark-to-market rental
price for house of this quality. This is of the same form as used for sale price in the Washington model.

If a house on the rental market does not get filled, the price is multiplied by 0.95 each month.

The length of a rental agreement is
chosen randomly from 12 to 24 months with uniform probability. This is based on figures from ARLA.

\subsubsection{Decision to sell BTL property}

Buy-to-let investors decide to sell houses in their current portfolio based on the `effective yield' on the house, which is defined as
\[
y_e = \frac{2(c_g \bar{g}p + (1-c_g)r) - m}{e} 
\]
where $c_g$ is the investor's capital gain coefficient $\bar{g}$ is expected annual house price appreciation, $r$ is current annual rental income from the house, $m$ is the current annual mortgage payment and $e$ is the maximum of the current equity in the house and 1 pence.

The probability of deciding to keep the house is then given by
\[
P(keep) = \frac{1}{(1 + e^{ky_e+c})^\gamma}
\]
where $k$ is a scaling constant, $c$ represents transaction costs and stickiness, and $\gamma$ deals with the fact that the decision to keep or sell is made every month in the model, whereas in reality this decision may be made less frequently.

If an investor decides to sell, the price at which the property is offered is decided in the same way as with homes (see section \ref{saleprice}).

\subsubsection{Decision to buy BTL property}
Buy-to-let investors decide to add houses to their current portfolio based on the `expected yield' on one or more houses bought with the maximum mortgage available to the investor, which is defined as
\[
\bar{y} = 2l(c_g \bar{g} + (1-c_g)\bar{r}) - \frac{m}{d} 
\]
where $c_g$ is the investor's capital gain coefficient, $\bar{g}$ is expected annual house price appreciation, $\bar{r}$ is an exponential average of the gross rental yield on new rental contracts, $l$ is the leverage (house price over downpayment) of the largest mortgage available to the investor, $m$ is the associated annual mortgage payment and $d$ is the minimum downpayment.

The probability of deciding not to buy any house is then given by
\[
P(\overline{buy}) = \frac{1}{(1 + e^{ky_e+c})^\gamma}
\]
where $k$ is a scaling constant, $c$ represents transaction costs and stickiness, and $\gamma$ deals with the fact that the decision to buy or not is made every month in the model, whereas in reality this decision may be made less frequently.

\subsubsection{Downpayment}
The decision on how much downpayment to make on a newly purchased house is made in the same way as described in section \ref{downpayment} except that BTL investors will choose downpayment from a Gaussian distribution (bounded at the lower end by zero) rather than a log-normal, this is calibrated against confidential BoE data.

\section{Banks}

There is a single bank in the model which represents the mortgage lending
sector in the aggregate.

\subsection{Mortgage approval}
The bank will approve a home mortgage as long as it
conforms to LTV, LTI and affordability constraints. The affordability
constraint ensures that a household has enough total income to pay all its
mortgages. Subject to meeting those criteria, all demand is met in any
period. The maximum mortgage amount, then, is calculated as

\bigskip 
\begin{equation}
q=\min \left( \frac{b(1-\theta )}{\theta },i\ast \psi ,\phi \ast pdi\frac{%
1-(1+r_{stress})^{-N}}{r_{stress}}\right)
\end{equation}

\bigskip

In the case of buy to let investors, a central-bank imposed Interest Coverage Ratio is imposed in place of the income to value ratio.

\bigskip The constraints are described in the following table.

\bigskip

\noindent \bigskip 
\begin{tabular}{p{1.5in}|p{4in}}
Term / constraint & Description \\ \hline\hline
$\frac{b(1-\theta )}{\theta }$ & LTV constraint. $b$ is the household's bank
balance, $\theta $ is the minimum loan to value haircut (i.e. 1 minus the
loan to value ratio). $\theta $ is 0.1 for first-time buyers, 0.2 for
homeowners moving home and 0.4 for buy-to-let investors. \\ 
$i\ast \psi $ & LTI constraint. $i$ is household gross income and $\psi $ is
the maximum loan to income ratio \\ 
$\phi \ast pdi\frac{1-(1+r_{stress})^{-N}}{r_{stress}}$ & Affordability test
given a down-payment of all cash in the bank and a monthly payment equal to
the share $\phi $ of the household's disposable income available for
mortgage payments. $pdi$ is a household's disposable income (including
income from rent), $r_{stress}$ is the fixed monthly interest rate based on
a stress scenario and $N$ is the number of monthly payments to pay off the
mortgage. $\phi $ is 0.25.%
\end{tabular}

\subsection{Interest rates}
Mortgage interest rate spread, $r$, is calculated according to
\[
r_{t+1} = r_{t} + k(S-T)
\]
where $k$ is a constant, $S$ is the aggregate rate of supply of credit and $T$ is a constant target rate of supply.

\section{Housing market clearing}

\subsection{House sales clearing}

Clearing proceeds as follows: Home-buyers are matched to the best quality
house they can afford and BtL investors are matched to the best gross yield house they can afford. Where a given offered house is matched with more than one bidder, the price is `bid up' by multiplying by $1.0075^k$ where $k$ is chosen at random from a geometric distribution such that
\[
p(k) = (1-e^{-7b/30})^{k-1}e^{-7b/30}
\]
where $b$ is the number of bids received in the timestep. The house is then offered to a randomly chosen bid that can still afford to buy. This approximates the outcome that would be achieved if the bids came in on random days in the simulated month; if a bid is followed by another bid within 7 days, the new bid `bids up' the price by $0.75\%$, the first bid that is not bid up within 7 days gets the house.

Failed bids then get to bid again. This re-bidding carries on up to the smaller of $N/1000$ and $1+n/5000000$ times, where $N$ is the population and $n$ is the total number of orders on the market.

\subsection{Rental clearing}

Rental clearing proceeds in the same way as house-sales-clearing, but
without yield-driven BtL bidders.\bigskip

\section{Central bank}

The central bank sets LTV, LTI, interest cover ratio (ICR) and affordability
policies. Policies can be of three different types:

1. Strict limits, e.g. a hard LTV limit of 90\% for all households (though
the limit may differ between types of agents, such as first-time buyers or
owner-occupiers);

2. 'Soft' limits, e.g. an LTI cap of 3.5 on new mortgage lending, but
allowing for 15\% of new mortgages above this limit;

3. State-contingent policies, e.g. an LTV limit of 85\% if credit growth
over a certain time is above a certain threshold; otherwise no limit.


\end{document}
